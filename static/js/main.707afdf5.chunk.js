(this["webpackJsonprocketlane-test"]=this["webpackJsonprocketlane-test"]||[]).push([[0],{36:function(n,t,e){},59:function(n,t,e){"use strict";e.r(t);var r,i,a,c,o,s,u,d,l,p,f,b,j,h,x,v,O,g,m,w=e(1),k=e.n(w),y=e(26),R=e.n(y),_=(e(36),e(2)),C=e(3),S=e(10),E=e(5),U=e(0),F=function(n){var t=n.children;return Object(U.jsx)("div",{children:t})},B=C.a.div(r||(r=Object(_.a)(["\n  display: flex;\n  flex-direction: column;\n  overflow: auto;\n  max-height: 100%;\n\n  * {\n    font-size: 14px;\n  }\n"]))),L=C.a.ul(i||(i=Object(_.a)(["\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  border-bottom: 1px solid #e0e0e0;\n  padding: 0;\n  margin: 0;\n  height: 40px;\n"]))),K=C.a.li(a||(a=Object(_.a)(["\n  list-style: none;\n  display: flex;\n  align-items: center;\n  padding: 0 16px;\n  height: 100%;\n  border-bottom: 2px solid ",";\n  cursor: pointer;\n  height: 40px;\n"])),(function(n){return n.active?"#0f62fe":"#e0e0e0"})),I=C.a.div(c||(c=Object(_.a)(["\n  max-height: 100%;\n  overflow: auto;\n  margin: 4px 0;\n"]))),P=function(n){var t=n.children,e=n.activeKey,r=n.onChange,i=function(n){r(n)},a=t.find((function(n,t){return n.props.tabKey===e}));return Object(U.jsxs)(B,{children:[Object(U.jsx)(L,{children:t.map((function(n,t){return Object(U.jsx)(K,{active:n.props.tabKey===e,onClick:i.bind(undefined,n.props.tabKey),children:n.props.tab},t)}))}),Object(U.jsx)(I,{children:a})]})},D=C.a.div(o||(o=Object(_.a)(["\n  display: flex;\n  align-items: center;\n  padding: 4px 8px;\n  font-weight: 500;\n  > div {\n    padding: 0 8px;\n  }\n"]))),z=C.a.div(s||(s=Object(_.a)(["\n  img {\n    width: 25px;\n    height: 25px;\n    border-radius: 50%;\n  }\n"]))),J=function(n){var t=n.user,e=n.reaction;return Object(U.jsxs)(D,{children:[Object(U.jsx)(z,{children:Object(U.jsx)("img",{src:t.avatar})}),Object(U.jsx)("div",{children:e.emoji}),Object(U.jsxs)("div",{children:[t.first_name," ",t.last_name]})]})},M=function(n,t){return n.reduce((function(n,e){var r=t(e);return n[r]||(n[r]=[]),n[r].push(e),n}),{})},T=C.a.div(u||(u=Object(_.a)(["\n  border: 1px solid #e0e0e0;\n  padding: 16px 0;\n  height: 300px;\n  min-width: 270px;\n"]))),A=C.a.div(d||(d=Object(_.a)(["\n  padding: 0 16px;\n"]))),N=function(n){var t=n.title,e=n.userReactions,r=Object(w.useState)("all"),i=Object(E.a)(r,2),a=i[0],c=i[1],o=function(n){return n.map((function(n,t){var e=n.user,r=n.reaction;return e&&r?Object(U.jsx)(J,{user:e,reaction:r},t):null}))};return Object(U.jsxs)(T,{children:[Object(U.jsx)(A,{children:t}),e.length>0?Object(U.jsx)(P,{activeKey:a,onChange:function(n){c(n)},children:function(){var n=M(e,(function(n){return n.reaction_id.toString()})),t=Object(U.jsx)(F,{tab:Object(U.jsx)("b",{children:"All"}),tabKey:"all",children:o(e)},"all"),r=Object.keys(n).map((function(t,e){var r,i=n[t],a="".concat(null===(r=i[0].reaction)||void 0===r?void 0:r.emoji," \u2022 ").concat(i.length);return Object(U.jsx)(F,{tab:a,tabKey:t,children:o(i)},e)}));return[t].concat(Object(S.a)(r))}()}):Object(U.jsx)("div",{style:{padding:"8px 16px"},children:"No Summary Data"})]})},X=e(4),Y=e.n(X),q=e(6),G=e.p+"static/media/smile.3e3d47c9.svg",H=e.p+"static/media/plus.d2c8885b.svg",Q=C.a.div(l||(l=Object(_.a)(["\n  position: relative;\n  max-width: 100px;\n"]))),V=C.a.img(p||(p=Object(_.a)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 33%;\n  background: white;\n  border-radius: 50%;\n"]))),W=function(n){var t=n.width;return Object(U.jsxs)(Q,{style:{width:"".concat(t,"px")},children:[Object(U.jsx)("img",{src:G,alt:"smile"}),Object(U.jsx)(V,{src:H})]})},Z="#161616",$=C.a.div(f||(f=Object(_.a)(["\n  display: flex;\n  position: relative;\n  align-items: center;\n  justify-content: center;\n"]))),nn=C.a.div(b||(b=Object(_.a)(["\n  background: ",";\n  border-radius: 2px;\n  padding: 12px 16px;\n  font-size: 12px;\n  color: white;\n  display: inline-block;\n  position: absolute;\n  transform: translateY(calc(-100% - 10px));\n\n  :before {\n    content:'';\n    position: absolute;\n    border-top: 4px solid ",";\n    border-right: 4px solid transparent;\n    border-left: 4px solid transparent;\n    bottom: -4px;\n    left: 50%;\n    transform: translateX(-50%);\n  }\n"])),Z,Z),tn=function(n){var t=n.text,e=n.children,r=Object(w.useState)(!1),i=Object(E.a)(r,2),a=i[0],c=i[1],o=Object(w.useRef)(null),s=function(n){o.current&&!o.current.contains(n.target)&&c(!1)};Object(w.useEffect)((function(){return document.addEventListener("mouseover",s),function(){document.removeEventListener("mouseover",s)}}),[]);return Object(U.jsxs)($,{ref:o,children:[a&&Object(U.jsx)(nn,{children:t}),Object(U.jsx)("div",{onMouseOver:function(n){c(!0)},children:e})]})},en=C.a.button(j||(j=Object(_.a)(["\n  padding: 0 8px;\n  border: none;\n  background: none;\n  cursor: pointer;\n"]))),rn=C.a.div(h||(h=Object(_.a)(["\n  width: 16px;\n  height: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  &:hover {\n    transform: scale(2);\n    transform-origin: bottom;\n  }\n"]))),an=function(n){var t=n.data,e=n.onEmojiClick;return Object(U.jsx)(en,{children:Object(U.jsx)(tn,{text:t.name,children:Object(U.jsx)(rn,{onClick:function(n){n.stopPropagation(),n.preventDefault(),e(t)},children:t.emoji})})})},cn=C.a.div(x||(x=Object(_.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n"]))),on=C.a.button(v||(v=Object(_.a)(["\n  width: 32px;\n  height: 32px;\n  border: 1px solid #e0e0e0;\n  border-radius: 50%;\n  position: relative;\n  cursor: pointer;\n"]))),sn=C.a.div(O||(O=Object(_.a)(["\n  position: absolute;\n  top: calc(-100% - 8px);\n  border-radius: 24px;\n  height: 32px;\n  font-size: 16px;\n  display: flex;\n  padding: 0 12px;\n  border: 1px solid #e0e0e0;\n  box-shadow: 0 3px 10px #e0e0e0;\n  background: white;\n"]))),un=function(n){var t=n.emojis,e=n.onEmojiClicked,r=Object(w.useRef)(null),i=Object(w.useState)(!1),a=Object(E.a)(i,2),c=a[0],o=a[1],s=Object(w.useState)(!0),u=Object(E.a)(s,2),d=u[0],l=u[1];Object(w.useEffect)((function(){return document.addEventListener("click",p),function(){document.removeEventListener("click",p)}}),[]);var p=function(n){r.current&&!r.current.contains(n.target)&&o(!1)},f=function(){var n=Object(q.a)(Y.a.mark((function n(t){return Y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!d){n.next=6;break}return l(!1),n.next=4,e(t);case 4:n.sent,l(!0);case 6:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}();return Object(U.jsxs)(cn,{ref:r,children:[c&&Object(U.jsx)(sn,{children:t.map((function(n,t){return Object(U.jsx)(an,{data:n,onEmojiClick:f},t)}))}),Object(U.jsx)(on,{onClick:function(){o(!c)},children:Object(U.jsx)(W,{})})]})},dn=C.a.div(g||(g=Object(_.a)(["\n  height: 32px;\n  border-radius: 24px;\n  border: 1px solid ",";\n  background: ",";\n  padding: 0 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: ",";\n\n  > div {\n    padding: 0 4px;\n  }\n"])),(function(n){return n.highlight?"#0f62fe":"#e0e0e0"}),(function(n){return n.highlight?"#edf5ff":"white"}),(function(n){return n.highlight&&"pointer"})),ln=function(n){var t=n.highlight,e=void 0!==t&&t,r=n.reaction,i=n.count,a=n.onReactionClick,c=Object(w.useState)(!0),o=Object(E.a)(c,2),s=o[0],u=o[1],d=function(){var n=Object(q.a)(Y.a.mark((function n(t){return Y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.stopPropagation(),t.preventDefault(),!e||!a){n.next=10;break}if(!s){n.next=9;break}return u(!1),n.next=7,a(r);case 7:n.sent,u(!0);case 9:return n.abrupt("return");case 10:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}();return Object(U.jsxs)(dn,{highlight:e,onClick:d,children:[Object(U.jsx)("div",{children:r.emoji}),Object(U.jsx)("div",{children:i})]})},pn=e(11),fn=e(30),bn=e(31),jn=e(8),hn=e.n(jn),xn=new(function(){function n(){var t=this;Object(fn.a)(this,n),this.endpoint="https://artful-iudex.herokuapp.com",this.fallbackEndpoint="https://my-json-server.typicode.com/artfuldev/json-db-data",this.getUsers=function(){return t.withFallBack((function(n){return hn.a.get("".concat(n,"/users"))}))},this.getReactions=function(){return t.withFallBack((function(n){return hn.a.get("".concat(n,"/reactions"))}))},this.getUserContentReactions=function(n){return t.withFallBack((function(t){return hn.a.get("".concat(t,"/user_content_reactions"),{params:n})}))},this.saveUserContentReaction=function(n){return t.withFallBack((function(t){return hn.a.post("".concat(t,"/user_content_reactions"),n)}))},this.deleteUserContentReaction=function(n){return t.withFallBack((function(t){return hn.a.delete("".concat(t,"/user_content_reactions/").concat(n))}))}}return Object(bn.a)(n,[{key:"withFallBack",value:function(){var n=Object(q.a)(Y.a.mark((function n(t){var e,r;return Y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.call(this,this.endpoint);case 3:return e=n.sent,n.abrupt("return",e);case 7:return n.prev=7,n.t0=n.catch(0),console.log("failed with primary endpoint, trying with fallback"),n.prev=10,n.next=13,t.call(this,this.fallbackEndpoint);case 13:return r=n.sent,n.abrupt("return",r);case 17:throw n.prev=17,n.t1=n.catch(10),console.log("failed with secondary endpoint"),new Error("failed to fetch data");case 21:case"end":return n.stop()}}),n,this,[[0,7],[10,17]])})));return function(t){return n.apply(this,arguments)}}()}]),n}()),vn=function(){var n=Object(q.a)(Y.a.mark((function n(){var t,e;return Y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,xn.getUsers();case 2:return t=n.sent,e=t.data,n.abrupt("return",e);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),On=function(){var n=Object(q.a)(Y.a.mark((function n(){var t,e;return Y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,xn.getReactions();case 2:return t=n.sent,e=t.data,n.abrupt("return",e);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),gn=function(){var n=Object(q.a)(Y.a.mark((function n(t){var e,r;return Y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,xn.getUserContentReactions({content_id:t});case 2:return e=n.sent,r=e.data,n.abrupt("return",r);case 5:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),mn=function(){var n=Object(q.a)(Y.a.mark((function n(t,e,r){var i;return Y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,xn.saveUserContentReaction({user_id:t,reaction_id:e,content_id:r});case 2:return i=n.sent,n.abrupt("return",i.data);case 4:case"end":return n.stop()}}),n)})));return function(t,e,r){return n.apply(this,arguments)}}(),wn=function(){var n=Object(q.a)(Y.a.mark((function n(t){var e;return Y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,xn.deleteUserContentReaction(t);case 2:return e=n.sent,console.log(e.data),n.abrupt("return",e.data);case 5:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),kn=function(n){var t=Object(w.useState)(!0),e=Object(E.a)(t,2),r=e[0],i=e[1],a=Object(w.useState)(),c=Object(E.a)(a,2),o=c[0],s=c[1],u=Object(w.useState)([]),d=Object(E.a)(u,2),l=d[0],p=d[1],f=Object(w.useState)([]),b=Object(E.a)(f,2),j=b[0],h=b[1],x=Object(w.useState)([]),v=Object(E.a)(x,2),O=v[0],g=v[1];Object(w.useEffect)((function(){(function(){var t=Object(q.a)(Y.a.mark((function t(){var e,r,a,c,o,u;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([vn(),On()]);case 3:return e=t.sent,r=Object(E.a)(e,2),a=r[0],c=r[1],h(a),p(c),t.next=11,gn(n);case 11:o=t.sent,u=[],o.map((function(n,t){var e=a.find((function(t){return t.id===n.user_id})),r=c.find((function(t){return t.id===n.reaction_id}));if(e&&r){var i=Object(pn.a)(Object(pn.a)({},n),{},{user:e,reaction:r});u.push(i)}})),g(u),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),s(t.t0);case 20:return t.prev=20,i(!1),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[0,17,20,23]])})));return function(){return t.apply(this,arguments)}})()()}),[n]);var m=function(n,t){return O.findIndex((function(e,r){return e.reaction_id===t&&e.user_id===n}))},k=function(){var t=Object(q.a)(Y.a.mark((function t(e,r){var i,a,c,o;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(-1===(i=m(e,r.id))){t.next=16;break}return a=O[i],O.splice(i,1),g(Object(S.a)(O)),t.prev=5,t.next=8,wn(a.id);case 8:return t.abrupt("return",!0);case 11:return t.prev=11,t.t0=t.catch(5),t.abrupt("return",!1);case 14:t.next=28;break;case 16:return t.prev=16,t.next=19,mn(e,r.id,n);case 19:return c=t.sent,(o=j.find((function(n){return n.id===e})))&&r&&(O.push(Object(pn.a)(Object(pn.a)({},c),{},{user:o,reaction:r})),g(Object(S.a)(O))),t.abrupt("return",!0);case 25:return t.prev=25,t.t1=t.catch(16),t.abrupt("return",!1);case 28:case"end":return t.stop()}}),t,null,[[5,11],[16,25]])})));return function(n,e){return t.apply(this,arguments)}}();return{loading:r,error:o,reactions:l,users:j,userReactions:O,toggleUserReaction:k,getUserReactionForReactionId:function(n,t){return O.find((function(e,r){return e.reaction_id===t&&e.user_id===n}))}}},yn=C.a.div(m||(m=Object(_.a)(["\n  display: flex;\n  align-items: center;\n  > div {\n    margin: 0 8px;\n  }\n"])));var Rn=function(){var n=kn(function(){var n=new URLSearchParams(window.location.search);return parseInt(n.get("content_id")||"1")}()),t=n.loading,e=n.error,r=n.reactions,i=(n.users,n.userReactions),a=n.toggleUserReaction,c=n.getUserReactionForReactionId,o=function(n){return a(4,n)};if(t)return Object(U.jsx)("div",{children:"Loading"});if(e)return Object(U.jsx)("div",{children:e.message});var s=M(i,(function(n){return n.reaction_id.toString()}));return Object(U.jsxs)(yn,{children:[Object(U.jsx)(N,{title:Object(U.jsx)("b",{children:"Reactions"}),userReactions:i}),r.map((function(n,t){if(!s[n.id])return null;var e=s[n.id].length,r=c(4,n.id);return Object(U.jsx)(ln,{reaction:n,count:e,highlight:r&&r.reaction_id==n.id,onReactionClick:o},t)})),Object(U.jsx)(un,{emojis:r,onEmojiClicked:o})]})},_n=function(n){n&&n instanceof Function&&e.e(3).then(e.bind(null,60)).then((function(t){var e=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,c=t.getTTFB;e(n),r(n),i(n),a(n),c(n)}))};R.a.render(Object(U.jsx)(k.a.StrictMode,{children:Object(U.jsx)(Rn,{})}),document.getElementById("root")),_n()}},[[59,1,2]]]);
//# sourceMappingURL=main.707afdf5.chunk.js.map